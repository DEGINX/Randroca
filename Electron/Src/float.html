<!DOCTYPE html>
<html style="overflow:hidden;">

<head>
    <link rel="stylesheet" type="text/css" href="semantic/semantic.min.css">
</head>

<body style="background: rgba(0, 0, 0, 0);">
    <div id="open" style="background:#00000078;height:100%;width: 100%;">
        <svg t="1616832491410" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="3467" width="20" height="50">
            <path
                d="M414.7 141.6v38.8c0 42.9 34.8 77.7 77.7 77.7h38.8c42.9 0 77.7-34.8 77.7-77.7v-38.8c0-42.9-34.8-77.7-77.7-77.7h-38.8c-42.9 0-77.7 34.8-77.7 77.7z m0 349.6V530c0 42.9 34.8 77.7 77.7 77.7h38.8c42.9 0 77.7-34.8 77.7-77.7v-38.8c0-42.9-34.8-77.7-77.7-77.7h-38.8c-42.9 0-77.7 34.8-77.7 77.7z m0 349.6v38.8c0 42.9 34.8 77.7 77.7 77.7h38.8c42.9 0 77.7-34.8 77.7-77.7v-38.8c0-42.9-34.8-77.7-77.7-77.7h-38.8c-42.9 0-77.7 34.8-77.7 77.7z"
                p-id="3468" fill="#ffffff"></path>
        </svg>
    </div>
</body>
<script>
    var Open_State = false;
    const open = document.querySelector("#open")
    const ipc = require('electron').ipcRenderer
    const ReconnectingWebSocket = require('reconnecting-websocket');
    var Prepare_Chosen_Student;
    const options = {
        maxReconnectionDelay: 0
    };
    var ws = new ReconnectingWebSocket("ws://websocket.deginx.com:10086", [], options);
    //申请一个WebSocket对象，参数是服务端地址，同http协议使用http://开头一样，WebSocket协议的url使用ws://开头，另外安全的WebSocket协议使用wss://开头
    ws.onopen = function () {
        //当WebSocket创建成功时，触发onopen事件
        ws.send('{ "uuid": "a5ca75d8-e5ca-49d0-9d54-318e6c91ec95", "key":"WUN:q,#:g)2`", "group": "randroca", "action": "none"}'); //将消息发送到服务端
    }
    ws.onmessage = function (e) {
        //当客户端收到服务端发来的消息时，触发onmessage事件，参数e.data包含server传递过来的数据
        content = JSON.parse(e.data)
        actions = JSON.parse(Buffer(content.content, 'base64').toString())
        switch (actions.action) {
            case "hidden":
                ipc.send('hidden');
                Open_State = false;
                break;
            case "open":
                ipc.send('open');
                Open_State = true;
                break;
        }
    }

    open.onclick = () => {
        if (!Open_State) {
            ipc.send('open');
            Open_State = true;
        }
        else {
            ipc.send('hidden');
            Open_State = false;
        }
    }
</script>

</html>